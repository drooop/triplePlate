

```

世俗人难以避免自己的偏见(这种偏见是我们简化认识复杂世界的手段之一)

但是就算心中对某国人有偏见

但不妨碍遇到每一个特殊的个体去重新认识，特殊对待



人没有一条路是白走的

就算你认为错误的(浪费了时间/错误的决定)也是如此



这种看法其实就基于一个很简单而显然的道理：人生中经历的所有，都对你这个人产生了影响，注意，这里说产生了影响是一种理性的叙述性的说法。那么认为这些影响都是有意义的，这些经历过的东西因产生了影响而都产生了意义。

```



### 机床上工单管理

####　在哪边管

1. 定时去14.102上取

取出来都放在HermleServer.py运行时内存中，这样断电也在的，因为记得做到哪一步

但是这样的方式不能管太细，比如flow的哪一步，还是这个也放上去？感觉不合理



2. 在机床pic侧新加工单管理

也是得先定时从14.102上取

取出来后放到本地的工单管理,



####　其他

是否要做到,14.102和机床wpic断连后也能继续做完?应该不要,因为这样报警,日志记录,完成信息都记录不到

所以做工单之前先检查14.102状态



### hermleflow.py

- 记录某个工单到flow的哪一步并提供查询



####　流程外

- while去定时获取14.102工单,派到台面的那种,到全局变量?

```python
tasks = {}
```



#### 流程内

1. 收到工单,反馈信息,使hs(HermleServer)知晓并在那一侧更改工单状态
2. 查一次托盘位置和状态，读取工单信息,比对下，优先做空闲并在最外侧的，若果没有在最外侧那么无所谓，按时间顺序或者列表自然顺序做

判断那个盘是否可用,不可用要报错排除故障(先这样),因为出现这个情况说明

一种: 状态更新一致性有问题

二一种: 有认为行为导致的托盘状态一致性问题

即托盘不可用却还派过来

托盘不可用包括

非空

被标记为不可用

3. 判断





###  会议记录

- 机器人LoccationError

- 短信通知故障做好了



解决

整个重置以下

- 重新扫地图(今天515下午)(但这部分估计只对小车KMP有用)

正好把B机床两个不用的电机柜拿走

C机床的W-PIC也拿走

把A机床也扫进去

现场环境相对标准化，查缺补漏

- 点位重新校准一下

- 保养
  - 清洁
  - 检查
    - 紧固(接线)



**怎么准确发现问题所在**



库卡过来

- LocationError(探明问题)
- 动作拆开

抓取动作抓住后为一个停顿，检测为



### 断电流程

ups启动后要能通知相关人员

产线操作人员，参与断电流程

IPIC断电重启流程



### 2.0

数字化工艺

1. 订单三种情况匹配三个加工程序，对应表

工艺管理库，程序都放在里面，对接CAPP

从库里

2. 高级排产
   1. 按照订单交付周期
   2. 按照订单数量
   3. 按照最大化



金：**应用场景，应用需求要整理清楚，有一定的目标**



产线扩充

- 硬件周期，到货，调试

现在开始确定尺寸



转告

下周头找时间，星期一下午，在讨论一次

主要是觉得和原来没区别，不是想象中的



金：把人看的工艺 迅速 变成智能产线可以执行的工艺, 自动生成？ 参数化的方式！



金：现场的需求比科学家的iead更重要



### 0519

- Hermleflow/hermleServer workingStep的置位逻辑要改变

原来是hermleServer读到工单就置一，然后就能被hermleflow发现，进而取得工单，取完hermleflow再把hermleServer上的信号位置位



现在是hermleServer向rootServer取工单，取完直接覆盖(**先覆盖，其他校验逻辑后补**)



### 0520

现在改为沿用原来逻辑，排产由rootServer控制，WPIC这边还是一直取订单，只取一个订单



但是变化之处在于，可能一直都能取到订单，所以取完后，应比对下一次拿到的是不是新的工单，是新的，再把workingstep置一



仍旧由root来管理上料部分，由root来换托盘到最外侧上料，所以root侧需要换盘接口，172.16.45.199:8010(B)/8000(C)



上料完毕后需要新增待加工零件RFID与托盘绑定的动作，绑定到全局变量上

root发现上料完毕后，调用WIPIC上的绑定动作

```python
rfidBindindDict = {
    '1': '',
    '2': '',
    '3': ''
}
```

平时返回状态时，将这个rfidBingdingDict加到状态中去

```python
hermleStatus = {
    ...,
    '3': ['3', 2001, 'Rohteil'],
    ...
}
```



workingstep置一后，hermleflow开始工作,此时向root发送消息更改工单状态从"已就位"变更为正在执行



**校验:**

- 是否是本机床订单,不是则报警，报错，停止，因为这说明排产出错
- 是否要用的托盘确实已经有对应rfid信息,没有则认为上料时有误,报错,停止,这说明上料阶段有出现过问题
- 是否可换盘(一般是不在上料时都能换盘,再加上不能换正在加工&处于5101位置的盘,这两个都判断)
- 可换盘的话,无论盘在哪,都执行sendPlate命令换进去
- 之后流程同之前一样
- 直到taskOver时,新增记录本次加工工单所用的托盘编号(其实按照现有逻辑,root给工单时就已经给定托盘号了,这里要做的应该是校验一次,去覆盖?这个再讨论)